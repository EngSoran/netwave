# ุชูุงูู ุงูุฏูุน ุนุจุฑ ZainCash ูุฎุฏูุฉ ุชุญููู ุงููููุงุช

## โ ุงูุชุญุฏูุซุงุช ุงูููุชููุฉ

### 1. ุชูุงูู ZainCash ูุน ูุธุงู ุงูุญุฌุฒ

#### ุงููููุงุช ุงููุนุฏูุฉ:
- `src/components/booking-form.tsx` - ุฅุถุงูุฉ ูุธุงู ุงูุฏูุน ูุจู ุฅุฑุณุงู ุงูุทูุจ
- `src/app/payment/callback/page.tsx` - ุตูุญุฉ ูุนุงูุฌุฉ ูุชูุฌุฉ ุงูุฏูุน
- `src/lib/zaincash.ts` - ุฎุฏูุฉ ZainCash ูุน ุฏุงูุฉ ุงูุชุญูู ูู ุงูุฏูุน
- `src/lib/email.ts` - ูุธุงู ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุจุงูุจุฑูุฏ ุงูุฅููุชุฑููู

#### ููู ูุนูู ูุธุงู ุงูุญุฌุฒ:
1. ุงููุณุชุฎุฏู ูููุฃ ูููุฐุฌ ุงูุญุฌุฒ
2. ูุชู ุฅูุดุงุก ุญุฌุฒ ูู Firebase ุจุญุงูุฉ "AwaitingPayment"
3. ุฅูุดุงุก ูุนุงููุฉ ุฏูุน ุนุจุฑ ZainCash
4. ุชูุฌูู ุงููุณุชุฎุฏู ูุจูุงุจุฉ ุงูุฏูุน
5. ุจุนุฏ ุงูุฏูุน ุงููุงุฌุญ:
   - ุชุญุฏูุซ ุญุงูุฉ ุงูุญุฌุฒ ุฅูู "Confirmed"
   - ุฅุฑุณุงู ุจุฑูุฏ ุฅููุชุฑููู ููุนููู
   - ุฅุฑุณุงู ุฅุดุนุงุฑ ููุฃุฏูู

#### ุฑุณุงุฆู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:
```typescript
// ููุนููู
sendBookingConfirmation({
  name: "ุงุณู ุงูุนููู",
  email: "email@example.com",
  service: "ุงุณู ุงูุฎุฏูุฉ",
  bookingDate: new Date(),
  amount: 50000,
  transactionId: "xxx"
});

// ููุฃุฏูู
sendAdminNotification({ ... });
```

### 2. ุฎุฏูุฉ ุชุญููู ุงููููุงุช ุงููุฏููุนุฉ

#### ุงููููุงุช ุงูุฌุฏูุฏุฉ:
- `src/app/files/page.tsx` - ุตูุญุฉ ุนุฑุถ ุงููููุงุช ุงููุชุงุญุฉ
- `src/app/files/callback/page.tsx` - ูุนุงูุฌุฉ ุงูุฏูุน ูุชุฃููุฏ ุงูุดุฑุงุก
- `src/components/admin/files-table.tsx` - ุฅุฏุงุฑุฉ ุงููููุงุช ูู ููุญุฉ ุงูุฃุฏูู

#### ุงููููุฒุงุช:
- โ ุนุฑุถ ูุงุฆูุฉ ุงููููุงุช ุงููุชุงุญุฉ ููุดุฑุงุก
- โ ูุธุงู ุฏูุน ูููุตู ููู ููู
- โ ุชุชุจุน ุงููุดุชุฑูุงุช (ูููุน ุงูุฏูุน ุงูููุฑุฑ)
- โ ุชุญููู ููุฑู ุจุนุฏ ุงูุฏูุน ุงููุงุฌุญ
- โ ููุญุฉ ุชุญูู ุงูุฃุฏูู ูุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุงููููุงุช

#### ุจูุงูุงุช ุงูููู ูู Firebase:
```javascript
{
  title: "ุนููุงู ุงูููู",
  description: "ูุตู ุงูููู",
  price: 50000, // ุจุงูุฏููุงุฑ ุงูุนุฑุงูู
  fileUrl: "https://example.com/file.pdf",
  fileName: "file.pdf",
  fileSize: "5.2 MB",
  createdAt: Timestamp
}
```

#### ุจูุงูุงุช ุงูุดุฑุงุก:
```javascript
{
  fileId: "xxx",
  userId: "xxx",
  transactionId: "xxx",
  amount: 50000,
  purchasedAt: Timestamp,
  status: "completed"
}
```

### 3. ุชุญุฏูุซุงุช ููุญุฉ ุงูุฃุฏูู

#### ุงููููุงุช ุงููุนุฏูุฉ:
- `src/app/admin/page.tsx` - ุฅุถุงูุฉ ุชุจููุจ ุงููููุงุช

#### ุงูุชุจููุจุงุช ุงููุชุงุญุฉ:
1. **ุงูุฎุฏูุงุช** - ุฅุฏุงุฑุฉ ุงูุฎุฏูุงุช ุงููุนุฑูุถุฉ
2. **ุทูุจุงุช ุงูุญุฌุฒ** - ุนุฑุถ ุญุฌูุฒุงุช ุงูุนููุงุก ูุน ุญุงูุฉ ุงูุฏูุน
3. **ุงููููุงุช** โญ ุฌุฏูุฏ - ุฅุฏุงุฑุฉ ุงููููุงุช ุงููุฏููุนุฉ

### 4. ุชุญุฏูุซุงุช ุงูุฃูุงู (Firestore Rules)

```javascript
// Files Collection
match /files/{fileId} {
  allow read: if true; // ุงูุฌููุน ููููู ุฑุคูุฉ ูุงุฆูุฉ ุงููููุงุช
  allow create, update, delete: if isAdmin();
}

// Purchases Collection
match /purchases/{purchaseId} {
  allow read: if isAuthenticated() &&
                 (resource.data.userId == request.auth.uid || isAdmin());
  allow create: if isAuthenticated() &&
                   request.resource.data.userId == request.auth.uid;
  allow update, delete: if isAdmin();
}

// Bookings - ุชุญุฏูุซ ููุณูุงุญ ุจุชุญุฏูุซ ุญุงูุฉ ุงูุฏูุน
allow update: if isAdmin() ||
                 (isAuthenticated() &&
                  resource.data.userId == request.auth.uid &&
                  request.resource.data.keys().hasOnly([
                    'status', 'paymentStatus', 'transactionId', 'paidAt'
                  ]));
```

### 5. ุฅุถุงูุฉ ุตูุฑ ููุฎุฏูุงุช

#### ุงููููุงุช ุงููุนุฏูุฉ:
- `src/lib/services.tsx` - ุชุญุฏูุซ ุฑูุงุจุท ุงูุตูุฑ ูู Unsplash
- `next.config.ts` - ุฅุถุงูุฉ images.unsplash.com ูููุทุงูุงุช ุงููุณููุญุฉ

#### ุงูุตูุฑ ุงููุณุชุฎุฏูุฉ:
- **ุจุฑูุฌุฉ ุงูุดุจูุงุช**: ุตูุฑุฉ ุงุญุชุฑุงููุฉ ูุดุงุดุฉ ุจุฑูุฌุฉ
- **ูุงููุฒูุฏ**: ุตูุฑุฉ ุชูููุฉ ูุฌุฑุฏุฉ

### 6. ุชุญุฏูุซุงุช ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ

#### ุงููููุงุช ุงููุนุฏูุฉ:
- `src/components/layout/header.tsx` - ุฅุถุงูุฉ ุฑุงุจุท "ุงููููุงุช"

#### ุฑูุงุจุท ุงูุชููู:
1. ุงูุฎุฏูุงุช
2. **ุงููููุงุช** โญ ุฌุฏูุฏ
3. ุงุญุฌุฒ ุงูุขู
4. ุงูุฅุฏุงุฑุฉ

---

## ๐ง ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ

### 1. ูุชุบูุฑุงุช ุงูุจูุฆุฉ (.env.local)

```env
# ZainCash Configuration
NEXT_PUBLIC_ZAINCASH_MERCHANT_ID=your_merchant_id
ZAINCASH_SECRET=your_secret_key
NEXT_PUBLIC_ZAINCASH_MSISDN=your_msisdn
NEXT_PUBLIC_ZAINCASH_API_URL=https://test.zaincash.iq
```

### 2. ููุงุนุฏ Firestore

ูู ุจูุดุฑ ุงูููุงุนุฏ ูู ููู `firestore.rules` ุฅูู Firebase Console:

```bash
firebase deploy --only firestore:rules
```

ุฃู ุงูุณุฎ ุงููุญุชูู ูุฏููุงู ูู Firebase Console > Firestore Database > Rules

### 3. Firebase Collections ุงููุทููุจุฉ

ุชุฃูุฏ ูู ุฅูุดุงุก ูุฐู ุงููุฌููุนุงุช:
- โ `services` - ุงูุฎุฏูุงุช
- โ `bookings` - ุงูุญุฌูุฒุงุช
- โ `files` - ุงููููุงุช ุงููุฏููุนุฉ
- โ `purchases` - ุณุฌู ุงููุดุชุฑูุงุช

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ููุฃุฏูู:

#### ุฅุถุงูุฉ ููู ุฌุฏูุฏ:
1. ุงูุชูู ุฅูู `/admin`
2. ุงุถุบุท ุนูู ุชุจููุจ "ุงููููุงุช"
3. ุงุถุบุท "ุฅุถุงูุฉ ููู ุฌุฏูุฏ"
4. ุงููุฃ ุงูุจูุงูุงุช:
   - ุงูุนููุงู (ูุทููุจ)
   - ุงููุตู
   - ุงูุณุนุฑ (ูุทููุจ)
   - ุฑุงุจุท ุงูููู (ูุทููุจ) - ูููู ุงุณุชุฎุฏุงู Google Drive, Dropbox, ุฃู Firebase Storage
   - ุงุณู ุงูููู
   - ุญุฌู ุงูููู
5. ุงุถุบุท "ุฅุถุงูุฉ"

#### ูุฑุงูุจุฉ ุงููุจูุนุงุช:
- ุนุฑุถ ุทูุจุงุช ุงูุญุฌุฒ ูุน ุญุงูุฉ ุงูุฏูุน ูู ุชุจููุจ "ุทูุจุงุช ุงูุญุฌุฒ"
- ููููู ุฑุคูุฉ `paymentStatus: "paid"` ููุญุฌูุฒุงุช ุงููุฏููุนุฉ

### ููุนููุงุก:

#### ุญุฌุฒ ุฎุฏูุฉ:
1. ุงูุชูู ุฅูู `/booking`
2. ุงููุฃ ุงููููุฐุฌ
3. ุงุถุบุท "ุฅุฑุณุงู ุงูุทูุจ"
4. ุณูุชู ุชูุฌููู ูุจูุงุจุฉ ุงูุฏูุน ZainCash
5. ุจุนุฏ ุงูุฏูุน ุงููุงุฌุญุ ุณุชุตูู ุฑุณุงูุฉ ุชุฃููุฏ ุจุงูุจุฑูุฏ

#### ุดุฑุงุก ููู:
1. ุงูุชูู ุฅูู `/files`
2. ุชุตูุญ ุงููููุงุช ุงููุชุงุญุฉ
3. ุงุถุบุท "ุดุฑุงุก ูุชุญููู"
4. ุณูุชู ุชูุฌููู ูุจูุงุจุฉ ุงูุฏูุน
5. ุจุนุฏ ุงูุฏูุนุ ููููู ุชุญููู ุงูููู ูุจุงุดุฑุฉ
6. ุงููููุงุช ุงููุดุชุฑุงุฉ ุชุธูุฑ ุจุนูุงูุฉ โ ุฎุถุฑุงุก

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑู)

### ุชูุงูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุงูุญูููู:

ุญุงููุงูุ ูุธุงู ุงูุจุฑูุฏ ูุณุฌู ุงูุฑุณุงุฆู ูู Console. ูุฅุฑุณุงู ุฑุณุงุฆู ุญููููุฉ:

#### ุงูุฎูุงุฑ 1: Resend (ููุตู ุจู)
```bash
npm install resend
```

```typescript
// src/app/api/send-email/route.ts
import { Resend } from 'resend';

const resend = new Resend(process.env.RESEND_API_KEY);

export async function POST(request: Request) {
  const { to, subject, html } = await request.json();

  await resend.emails.send({
    from: 'noreply@yourdomain.com',
    to,
    subject,
    html,
  });

  return Response.json({ success: true });
}
```

#### ุงูุฎูุงุฑ 2: SendGrid
```bash
npm install @sendgrid/mail
```

#### ุงูุฎูุงุฑ 3: Nodemailer (ูุน Gmail/SMTP)

### ุฑูุน ุงููููุงุช ุฅูู Firebase Storage:

```typescript
import { ref, uploadBytes, getDownloadURL } from 'firebase/storage';
import { storage } from '@/lib/firebase';

async function uploadFile(file: File) {
  const storageRef = ref(storage, `files/${file.name}`);
  await uploadBytes(storageRef, file);
  const url = await getDownloadURL(storageRef);
  return url;
}
```

---

## ๐ ููุฎุต ุงูุชุญุฏูุซุงุช

| ุงูููุฒุฉ | ุงูุญุงูุฉ | ุงููููุงุช |
|--------|--------|---------|
| ุชูุงูู ZainCash | โ ููุชูู | booking-form.tsx, payment/callback/page.tsx |
| ุฅุดุนุงุฑุงุช ุงูุจุฑูุฏ | โ ููุชูู (Console) | email.ts |
| ุฎุฏูุฉ ุงููููุงุช | โ ููุชูู | files/page.tsx |
| ุฏูุน ุงููููุงุช | โ ููุชูู | files/callback/page.tsx |
| ุฅุฏุงุฑุฉ ุงููููุงุช | โ ููุชูู | admin/files-table.tsx |
| ุตูุฑ ุงูุฎุฏูุงุช | โ ููุชูู | services.tsx |
| ููุงุนุฏ Firestore | โ ูุญุฏุซุฉ | firestore.rules |
| ุฑุงุจุท ุงููุงุฆูุฉ | โ ูุถุงู | header.tsx |

---

## ๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุงูุขู ูุฏูู:

1. โ **ูุธุงู ุญุฌุฒ ูุชูุงูู** ูุน ุฏูุน ZainCash ูุจู ุฅุฑุณุงู ุงูุทูุจ
2. โ **ุฎุฏูุฉ ูููุงุช ูุฏููุนุฉ** ูุงููุฉ ูุน ููุญุฉ ุชุญูู ููุฃุฏูู
3. โ **ุฅุดุนุงุฑุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู** ููุนููุงุก ูุงูุฃุฏูู
4. โ **ุตูุฑ ุงุญุชุฑุงููุฉ** ููุฎุฏูุงุช ูู Unsplash
5. โ **ุฃูุงู ูุญุณู** ูุน ููุงุนุฏ Firestore ูุญุฏุซุฉ
6. โ **ูุงุฌูุฉ ูุณุชุฎุฏู ูุญุณูุฉ** ูุน ุฑุงุจุท ุงููููุงุช ูู ุงููุงุฆูุฉ

ูู ุดูุก ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐
